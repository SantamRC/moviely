(this.webpackJsonpmovieapp=this.webpackJsonpmovieapp||[]).push([[0],{124:function(e,t,c){},125:function(e,t,c){},153:function(e,t,c){},155:function(e,t,c){},156:function(e,t,c){},157:function(e,t,c){},158:function(e,t,c){},159:function(e,t,c){},160:function(e,t,c){},161:function(e,t,c){},162:function(e,t,c){"use strict";c.r(t);var n=c(0),a=c.n(n),i=c(15),r=c.n(i),s=c(25),o=c(62),l=c(106),d=c(41),u=(c(124),c(11)),j=(c(125),c(193)),h=c(197),b=c(198),p=c(27),m=c(14),v=c.n(m),f=c(55);c(127),c(164);f.a.initializeApp({apiKey:"AIzaSyBSzBXe4CIil1c9ZNhTZCkykuYUYydaUxc",authDomain:"moviely-d53f2.firebaseapp.com",projectId:"moviely-d53f2",storageBucket:"moviely-d53f2.appspot.com",messagingSenderId:"13591194154",appId:"1:13591194154:web:68731256b08d521ce43153"});var O=f.a.auth(),x=(f.a.firestore(),new f.a.auth.GoogleAuthProvider),g=function(){return O.signInWithPopup(x)},y=function(){var e=Object(p.a)(v.a.mark((function e(t,c){var n,a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:return n=w.doc("users/".concat(t.uid)),e.next=5,n.get();case 5:if(e.sent.exists){e.next=16;break}return a=new Date,e.prev=8,e.next=11,n.set({createdAt:a,watchlist:[]});case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(8),console.log("error.message");case 16:return e.abrupt("return",n);case 17:case"end":return e.stop()}}),e,null,[[8,13]])})));return function(t,c){return e.apply(this,arguments)}}(),w=f.a.firestore(),_=(f.a,c(22)),N=c(48),k=function(e){return function(){var t=Object(p.a)(v.a.mark((function t(c){return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e){t.next=2;break}return t.abrupt("return",c({type:"SET_CURRENT_USER",payload:null}));case 2:w.collection("users").doc(e.uid).get().then((function(t){if(t.exists)return c({type:"SET_CURRENT_USER",payload:Object(N.a)(Object(N.a)({},e),{},{createdAt:t.data().createdAt})})})).catch((function(e){return console.log(e)}));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},E=c(4);var S=Object(d.b)((function(e){return{currentUser:e.currentUser}}),{signIn:k})((function(e){return Object(E.jsx)(j.a,{className:"nav ".concat(e.show?"":"hide"),color:"secondary",children:Object(E.jsxs)(h.a,{className:"nav__container",children:[Object(E.jsx)(s.b,{style:{textDecoration:"none",color:"unset"},to:"/",children:Object(E.jsx)("h2",{className:"logo",children:"Moviely"})}),e.currentUser?Object(E.jsx)(s.b,{to:"/profile",style:{textDecoration:"none",color:"unset"},children:Object(E.jsx)("h4",{children:" My WatchList"})}):Object(E.jsx)(b.a,{onClick:g,color:"inherit",variant:"outlined",children:"Sign In"})]})})})),U=c(21),M=c(53),I=c.n(M),T=(c(153),c(205)),L=c(107),C=c(207),D=c(201),A=c(199),R=c(200),V=c(202),W=c(203),Y=c(204),F=c(104),B=c.n(F),q="4d51e2149ffec1e3fabb84a54d724b76",z={trending:"https://api.themoviedb.org/3/trending/movie/day?api_key=".concat(q),action:"https://api.themoviedb.org/3/discover/movie?api_key=".concat(q,"&sort_by=popularity.desc&page=1&with_genres=28"),animation:"https://api.themoviedb.org/3/discover/movie?api_key=".concat(q,"&sort_by=popularity.desc&page=1&with_genres=16"),comedy:"https://api.themoviedb.org/3/discover/movie?api_key=".concat(q,"&sort_by=popularity.desc&page=1&with_genres=35"),documentary:"https://api.themoviedb.org/3/discover/movie?api_key=".concat(q,"&sort_by=popularity.desc&page=1&with_genres=99"),drama:"https://api.themoviedb.org/3/discover/movie?api_key=".concat(q,"&sort_by=popularity.desc&page=1&with_genres=18"),horror:"https://api.themoviedb.org/3/discover/movie?api_key=".concat(q,"&sort_by=popularity.desc&page=1&with_genres=27"),romance:"https://api.themoviedb.org/3/discover/movie?api_key=".concat(q,"&sort_by=popularity.desc&page=1&with_genres=10749"),thriller:"https://api.themoviedb.org/3/discover/movie?api_key=".concat(q,"&sort_by=popularity.desc&page=1&with_genres=53"),images:"https://image.tmdb.org/t/p/w500/",getMovie:function(e){return"https://api.themoviedb.org/3/movie/".concat(e,"?api_key=").concat(q)},getYoutube:function(e){return"https://api.themoviedb.org/3/movie/".concat(e,"/videos?api_key=").concat(q)},searchMovie:function(e){return"https://api.themoviedb.org/3/search/movie?api_key=".concat(q,"&query=").concat(e)}},H=Object(L.a)({palette:{type:"dark"}}),P=Object(C.a)(A.a)({marginTop:"5px",backgroundColor:"#1e2125",color:"#ffffff"}),X=Object(C.a)(R.a)({"&:hover":{background:"#2c3036"}}),J=function(e){var t=Object(n.useState)(""),c=Object(u.a)(t,2),a=c[0],i=c[1],r=Object(n.useState)([]),o=Object(u.a)(r,2),l=o[0],d=o[1];return Object(n.useEffect)((function(){function e(){return(e=Object(p.a)(v.a.mark((function e(){var t,c;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a.length<3)){e.next=4;break}d([]),e.next=9;break;case 4:return e.next=6,I.a.get(z.searchMovie(a));case 6:t=e.sent,c=t.data,d(c.results.slice(0,5));case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var t=setTimeout((function(){a&&function(){e.apply(this,arguments)}()}),300);return function(){a.length<3&&d([]),clearTimeout(t)}}),[a]),Object(E.jsxs)("div",{className:"search-bar",children:[Object(E.jsx)(D.a,{theme:H,children:Object(E.jsx)("form",{action:"submit",onSubmit:function(t){t.preventDefault(),e.handleSubmit(a)},children:Object(E.jsx)(T.a,{autoComplete:"off",id:"filled-secondary",label:"Search Movies",variant:"outlined",value:a,fullWidth:!0,InputProps:{endAdornment:Object(E.jsx)(V.a,{position:"end",children:Object(E.jsx)(B.a,{})})},color:"secondary",onChange:function(e){i(e.target.value)}})})}),!l.length>0?Object(E.jsx)("div",{}):Object(E.jsx)("div",{className:"search-list",children:Object(E.jsx)(P,{component:"nav","aria-label":"mailbox folders",children:l.map((function(t){return Object(E.jsx)("div",{style:e,children:Object(E.jsxs)(s.b,{to:"/movie/".concat(t.id),style:{textDecoration:"none",color:"unset"},children:[Object(E.jsx)(X,{button:!0,children:Object(E.jsx)(W.a,{primary:"".concat(t.title," ").concat(t.release_date?"("+t.release_date.split("-")[0]+")":"")})}),Object(E.jsx)(Y.a,{light:!0})]})},t.id)}))})})]})},Z=(c(155),c(31));c(156),c(157);var G=function(){return Object(E.jsx)("div",{className:"loader-container",children:Object(E.jsxs)("div",{className:"lds-grid",children:[Object(E.jsx)("div",{}),Object(E.jsx)("div",{}),Object(E.jsx)("div",{}),Object(E.jsx)("div",{}),Object(E.jsx)("div",{}),Object(E.jsx)("div",{}),Object(E.jsx)("div",{}),Object(E.jsx)("div",{}),Object(E.jsx)("div",{})]})})};var K=function(e){var t=Object(Z.useSpring)({opacity:1,from:{opacity:0},config:Z.config.molasses});return Object(E.jsx)(Z.animated.div,{style:t,className:"movie-card",children:Object(E.jsxs)(s.b,{to:"/movie/".concat(e.id),style:{textDecoration:"none",color:"unset"},children:[Object(E.jsx)("div",{className:"img-container",children:e.imageUrl?Object(E.jsx)("img",{className:"img-movie",src:"https://image.tmdb.org/t/p/w500/".concat(e.imageUrl),alt:e.title}):Object(E.jsx)(G,{})}),Object(E.jsx)("h3",{children:e.title})]})})};c(158);var Q=function(e){var t=Object(n.useState)([]),c=Object(u.a)(t,2),a=c[0],i=c[1];return Object(n.useEffect)((function(){function t(){return(t=Object(p.a)(v.a.mark((function t(){var c;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,I.a.get(e.fetchUrl);case 2:c=t.sent,i((function(){return e.trim?c.data.results.slice(0,8):c.data.results}));case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}!function(){t.apply(this,arguments)}()}),[e.fetchUrl,e.trim]),0===a.length?"You might also like"===e.title||"/"===window.location.pathname?Object(E.jsx)("div",{}):Object(E.jsxs)(E.Fragment,{children:[Object(E.jsx)("div",{className:"movie-list",children:Object(E.jsxs)("h2",{children:[" ",e.title," "]})}),Object(E.jsx)("h1",{children:"No Movies Found"})]}):Object(E.jsxs)("div",{className:"movie-list",children:[Object(E.jsx)("h2",{children:e.title}),Object(E.jsx)("div",{className:"movies",children:a.map((function(e){return Object(E.jsx)(K,{id:e.id,title:e.title,imageUrl:e.poster_path},e.id)}))})]})};var $=function(){var e=Object(U.f)();return Object(E.jsxs)("div",{className:"page__container home",children:[Object(E.jsx)("h1",{children:"Millions of movies to discover. Explore Now."}),Object(E.jsx)(J,{handleSubmit:function(t){e.push("/search/".concat(t))}}),Object(E.jsx)(Q,{title:"Trending Now",fetchUrl:z.trending,trim:!0}),Object(E.jsx)(Q,{title:"Action Movies",fetchUrl:z.action,trim:!0}),Object(E.jsx)(Q,{title:"Animation Movies",fetchUrl:z.animation,trim:!0}),Object(E.jsx)(Q,{title:"Comedy Movies",fetchUrl:z.comedy,trim:!0}),Object(E.jsx)(Q,{title:"Drama Movies",fetchUrl:z.drama,trim:!0}),Object(E.jsx)(Q,{title:"Horror Movies",fetchUrl:z.horror,trim:!0}),Object(E.jsx)(Q,{title:"Romance Movies",fetchUrl:z.romance,trim:!0}),Object(E.jsx)(Q,{title:"Thriller Movies",fetchUrl:z.thriller,trim:!0})]})};c(159);var ee=function(){var e=Object(U.g)().query,t=Object(n.useState)(e),c=Object(u.a)(t,2),a=c[0],i=c[1],r=Object(U.f)();return Object(E.jsxs)("div",{className:"page__container search",children:[Object(E.jsx)("div",{className:"search",children:Object(E.jsx)(J,{handleSubmit:function(e){r.replace("/search/".concat(e)),i(e)}})}),Object(E.jsx)(Q,{title:"Search results for: ".concat(a),fetchUrl:z.searchMovie(a)})]})},te=c(208),ce=(c(160),c(105)),ne=c.n(ce);var ae=Object(d.b)((function(e){return{currentUser:e.currentUser,watchList:e.watchlist}}),{removeMovie:function(e,t){return function(){var c=Object(p.a)(v.a.mark((function c(n,a){return v.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:w.collection("users").doc(t).update({watchlist:a().watchlist.filter((function(t){return t.id!==e.id}))}),n({type:"REMOVE_MOVIE",payload:e});case 3:case"end":return c.stop()}}),c)})));return function(e,t){return c.apply(this,arguments)}}()}})((function(e){var t=e.currentUser,c=e.watchList,a=e.removeMovie,i=Object(U.f)();return Object(n.useEffect)((function(){document.title="WatchList"}),[]),Object(E.jsx)("div",{className:"page__container",children:t?Object(E.jsx)(E.Fragment,{children:Object(E.jsxs)("div",{className:"profile",children:[Object(E.jsxs)("div",{className:"user-info",children:[Object(E.jsx)("div",{className:"info-logout",children:Object(E.jsxs)("div",{className:"info",children:[Object(E.jsx)("div",{className:"photo",children:Object(E.jsx)(te.a,{variant:"square",alt:"user",src:t.photoURL})}),Object(E.jsxs)("div",{className:"text-info",children:[Object(E.jsx)("h2",{className:"name",children:t.displayName}),Object(E.jsx)("h3",{className:"date",children:"Member since: ".concat(t.createdAt?t.createdAt.toDate().toString().slice(4,16):"Loading...")})]}),Object(E.jsx)("div",{className:"logout",children:Object(E.jsx)(b.a,{onClick:function(){O.signOut(),i.replace("/")},variant:"outlined",color:"secondary",className:"delete-btn",children:"Log Out"})})]})}),Object(E.jsx)("div",{className:"movie-count",children:Object(E.jsx)("h2",{children:"You have ".concat(c.length," movies in your WatchList")})})]}),Object(E.jsx)("div",{className:"watch-list",children:c?c.map((function(e){return Object(E.jsxs)("div",{className:"list-item",children:[Object(E.jsx)(s.b,{to:"/movie/".concat(e.id),children:Object(E.jsx)("img",{className:"movie-poster",src:"https://image.tmdb.org/t/p/w500".concat(e.poster_path),alt:"poster"})}),Object(E.jsxs)("div",{className:"movie-info",children:[Object(E.jsx)(s.b,{to:"/movie/".concat(e.id),style:{textDecoration:"none",color:"#fff"},children:Object(E.jsx)("p",{className:"movie-title",children:e.title})}),Object(E.jsx)("p",{className:"movie-rating",children:"User Rating: ".concat(e.vote_average)})]}),Object(E.jsx)("div",{className:"delete",children:Object(E.jsx)(ne.a,{color:"secondary",className:"delete-icon",fontSize:"large",onClick:function(c){c.target.parentElement.parentElement.parentElement.classList.add("removing"),setTimeout((function(){a(e,t.uid)}),600)}})})]},e.id)})):"Loading..."})]})}):Object(E.jsx)("h1",{children:"Sign in to see your WatchList"})})}));c(161);var ie=Object(d.b)((function(e){return{currentUser:e.currentUser,watchList:e.watchlist}}),{addMovie:function(e,t){return function(){var c=Object(p.a)(v.a.mark((function c(n,a){return v.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:w.collection("users").doc(t).update({watchlist:[].concat(Object(_.a)(a().watchlist),[e])}),n({type:"ADD_MOVIE",payload:e});case 3:case"end":return c.stop()}}),c)})));return function(e,t){return c.apply(this,arguments)}}()}})((function(e){var t=Object(U.g)().id,c=Object(n.useState)({}),a=Object(u.a)(c,2),i=a[0],r=a[1],o=Object(n.useState)(""),l=Object(u.a)(o,2),d=l[0],j=l[1],h=Object(Z.useSpring)({left:"0",from:{left:"-100%"},delay:700}),m=Object(Z.useSpring)({right:"0",from:{right:"-100%"},delay:400}),f=Object(Z.useSpring)({scale:1,from:{scale:0},delay:1400}),O=Object(Z.useSpring)({marginTop:"0",from:{marginTop:"200px"},delay:1600,config:Z.config.slow}),x=e.watchList.filter((function(e){return e.id==t})).length>0;return Object(n.useEffect)((function(){function e(){return(e=Object(p.a)(v.a.mark((function e(){var c,n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I.a.get(z.getMovie(t));case 2:return c=e.sent,e.next=5,I.a.get(z.getYoutube(t));case 5:n=e.sent,r(c.data),n.data.results.length>0&&j(n.data.results[0].key),document.title="".concat(c.data.title);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[t]),i.title?Object(E.jsxs)("div",{className:"page__container",children:[Object(E.jsxs)("div",{className:"movie_card",children:[Object(E.jsxs)(Z.animated.div,{style:h,className:"info_section",children:[Object(E.jsxs)("div",{className:"movie_header",children:[Object(E.jsx)("img",{className:"locandina",src:"https://image.tmdb.org/t/p/w500".concat(i.poster_path),alt:"movie-logo"}),Object(E.jsx)("h1",{children:i.title}),Object(E.jsx)("h4",{children:i.release_date?i.release_date.slice(0,4):"Loading..."}),Object(E.jsx)("p",{className:"type",children:i.genres?i.genres.map((function(e){return e.name})).join(", "):"Loading..."}),Object(E.jsx)("p",{className:"minutes",children:"".concat(i.runtime," min")}),x?Object(E.jsx)(s.b,{to:"/profile",style:{textDecoration:"none",color:"unset"},children:Object(E.jsx)(b.a,{variant:"contained",color:"secondary",children:"Added to WatchList"})}):Object(E.jsx)(b.a,{onClick:function(){e.currentUser?e.addMovie(i,e.currentUser.uid):window.alert("Sign In to add to WatchList")},variant:"outlined",color:"secondary",children:"Add to Watchlist"})]}),Object(E.jsxs)("div",{className:"movie_desc",children:[Object(E.jsx)("p",{className:"text",children:i.overview}),Object(E.jsxs)("div",{className:"external-links",children:[Object(E.jsx)(Z.animated.a,{style:f,href:"https://www.imdb.com/title/".concat(i.imdb_id),target:"_blank",rel:"noreferrer",children:Object(E.jsx)("img",{className:"imdb-logo",src:"https://upload.wikimedia.org/wikipedia/commons/6/69/IMDB_Logo_2016.svg",alt:"imdb-logo"})}),Object(E.jsx)(Z.animated.a,{style:f,href:"https://www.youtube.com/watch?v=".concat(d),target:"_blank",rel:"noreferrer",children:Object(E.jsx)("img",{className:"yt-logo",src:"https://www.logo.wine/a/logo/YouTube/YouTube-White-Logo.wine.svg",alt:"youtube-logo"})})]})]})]}),Object(E.jsx)(Z.animated.div,{style:Object(N.a)(Object(N.a)({},m),{},{backgroundImage:'url("https://image.tmdb.org/t/p/original'.concat(i.backdrop_path,'")')}),className:"blur_back bright_back"})]}),Object(E.jsx)(Z.animated.div,{style:O,children:Object(E.jsx)(Q,{title:"You might also like",fetchUrl:"https://api.themoviedb.org/3/movie/".concat(t,"/similar?api_key=a1c8048951164cc08dff8c1ea6d7fcfc"),trim:!0,red:!0})})]}):Object(E.jsx)("div",{})}));var re=Object(d.b)(null,{signIn:k,fetchMovies:function(e){return function(){var t=Object(p.a)(v.a.mark((function t(c){return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e){t.next=2;break}return t.abrupt("return",c({type:"FETCH_MOVIES",payload:[]}));case 2:w.collection("users").doc(e).get().then((function(e){if(e.exists)return c({type:"FETCH_MOVIES",payload:e.data().watchlist})})).catch((function(e){return console.log(e)}));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}})((function(e){var t=Object(n.useState)(!0),c=Object(u.a)(t,2),a=c[0],i=c[1];return Object(n.useEffect)((function(){O.onAuthStateChanged((function(t){t&&(y(t),e.fetchMovies(t.uid)),e.signIn(t),e.fetchMovies(null)}))}),[e]),Object(n.useEffect)((function(){var e=function(){window.scrollY>60?i(!1):i(!0)};return window.addEventListener("scroll",e),function(){window.removeEventListener("scroll",e)}}),[]),Object(E.jsx)("div",{className:"App",children:Object(E.jsxs)("div",{className:"flex-wrapper",children:[Object(E.jsx)(S,{show:a}),Object(E.jsxs)(U.c,{children:[Object(E.jsx)(U.a,{path:"/",exact:!0,children:Object(E.jsx)($,{})}),Object(E.jsx)(U.a,{path:"/search/:query",children:Object(E.jsx)(ee,{})}),Object(E.jsx)(U.a,{path:"/movie/:id",children:Object(E.jsx)(ie,{})}),Object(E.jsx)(U.a,{path:"/profile",children:Object(E.jsx)(ae,{})})]})]})})})),se=c(18),oe=c(16),le=c(29),de=c(30),ue=function(e){Object(le.a)(c,e);var t=Object(de.a)(c);function c(){return Object(se.a)(this,c),t.apply(this,arguments)}return Object(oe.a)(c,[{key:"componentDidUpdate",value:function(e){this.props.location.pathname!==e.location.pathname&&window.scrollTo(0,0)}},{key:"render",value:function(){return null}}]),c}(a.a.Component),je=Object(U.h)(ue),he=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return"SET_CURRENT_USER"===t.type?t.payload:e},be=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_MOVIES":return t.payload;case"ADD_MOVIE":return[].concat(Object(_.a)(e),[t.payload]);case"REMOVE_MOVIE":return e.filter((function(e){return e.id!==t.payload.id}));default:return e}},pe=Object(o.b)({currentUser:he,watchlist:be}),me=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||o.c,ve=Object(o.d)(pe,me(Object(o.a)(l.a)));r.a.render(Object(E.jsx)(a.a.StrictMode,{children:Object(E.jsx)(d.a,{store:ve,children:Object(E.jsxs)(s.a,{children:[Object(E.jsx)(je,{}),Object(E.jsx)(re,{})]})})}),document.getElementById("root"))}},[[162,1,2]]]);
//# sourceMappingURL=main.b4226c07.chunk.js.map